<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.0/jquery.min.js"></script>
    <style>
   section h2{
	text-align: center;
}

form label span{
	display: inline-block;
	width  : 120px;
	text-align: left;
}
ul{
	list-style-position: outside;
	padding: 0px;
}
ul li{
	list-style-type: none;
	margin: 10px auto;
}

hr{
	display: block;
	margin: 20px auto;
}

#btn{
	width: 10%;
	height: 50px;
}

table#tblList{
	border: 0px solid black;
	width: 100%;
    background-color: black;
}

table#tblList thead tr th{
	border: 0px solid black;
	padding: 10px;
	margin: 0px;
    color: blanchedalmond;
}

table#tblList tbody td{
	text-align: center;
	border-bottom: 1px solid black;
    color: blanchedalmond;
}
.container{
    background-color: black;
}
    </style>
</head>
<body>
    <div class="container">
    <form id="frmCadastro">
        <section>
            <h2 style="background-color: black; color: chartreuse;">Adding product values</h2>
        <fieldset>
            <legend style="background-color: pink; color: black;">Data form:</legend>
            <ul>
                <li>
                    <label for="Product Code">
                        <span style="background-color: chartreuse; color: black;"><b>Product Code:</b></span>
                        <input type="text" id="txtCodigo"/>
                    </label>
                </li>
                <li>
                    <label for="Pro-Name">
                        <span style="background-color: chartreuse; color: black;"><b>Product Name:</b></span>
                        <input type="text" id="txtNome"/>
                    </label>
                </li>
                <li>
                    <label for="Pro-Skew">
                        <span style="background-color: chartreuse; color: black;"><b>Product SKEW</b></span>
                         <input type="text" id="txtTelefone"/>
                    </label>
                </li>
                <li>
                    <label for="Pro-Quan">
                        <span style="background-color: chartreuse; color: black;"><b>Quantity:</b></span>
                        <input type="text" id="txtEmail"/>
                    </label>
                </li>
                <li>
                    <input type="submit" value="Submit" id="btn"/>
                </li>
            </ul>
        </fieldset>
    </section>
</form></div>
<hr>
<table id="tblList"> </table>
<script>
   $(function(){
    var oper = "A"; 
    var selection = -1; 
    var tbClient = localStorage.getItem("tbClient");
    tbClient = JSON.parse(tbClient); 

		if(tbClient == null){ 
	    tbClient = [];
		}

		$("#frmCadastro").on("submit",function(){
			if(oper == "A"){
			    return Adicionar(tbClient);
			}else{
			    return Editar(tbClient,selection);
			}
		});

		List(tbClient);

		$("#tblList").on("click", ".btnEditor", function(){
	    oper = "E";
	    selection = parseInt($(this).attr("alt"));
			var cli = JSON.parse(tbClient[selection]);
	    $("#txtCodigo").val(cli.Productcode);
	    $("#txtNome").val(cli.ProductName);
	    $("#txtTelefone").val(cli.ProductSKEW);
	    $("#txtEmail").val(cli.Quantity);
		});

		$("#tblList").on("click", ".btnExclude",function(){
	    selection = parseInt($(this).attr("alt"));
			Exclude(tbClient, selection);
	    List(tbClient);
		});
});

function Adicionar(tbClient){

		var client = JSON.stringify({
        Productcode  : $("#txtCodigo").val(),
        ProductName     : $("#txtNome").val(),
        ProductSKEW : $("#txtTelefone").val(),
        Quantity    : $("#txtEmail").val()
    });
    tbClient.push(client);
		console.log("tbClient - " + tbClient);
    localStorage.setItem("tbClient", JSON.stringify(tbClient));
    return true;
}

function Editar(tbClient,selection){
    tbClient[selection] = JSON.stringify({
            Productcode   : $("#txtCodigo").val(),
            ProductName     : $("#txtNome").val(),
            ProductSKEW : $("#txtTelefone").val(),
            Quantity    : $("#txtEmail").val()
        });
    localStorage.setItem("tbClient", JSON.stringify(tbClient));
    oper = "A"; 
    return true;
}

function Exclude(tbClient, selection){
    tbClient.splice(selection, 1);
    localStorage.setItem("tbClient", JSON.stringify(tbClient));

}

function List(tbClient){
    $("#tblList").html("");
    $("#tblList").html(
        "<thead>"+
        "   <tr>"+
        "   <th></th>"+
        "   <th><b style='background-color:red'>ProductCode</b></th>"+
        "   <th><b style='background-color:red'>ProductName</b></th>"+
        "   <th><b style='background-color:red'>ProductSKEW</b></th>"+
        "   <th><b style='background-color:red'>Quantity</b></th>"+
        "   </tr>"+
        "</thead>"+
        "<tbody>"+
        "</tbody>"
        );
    for(var i in tbClient){
        var cli = JSON.parse(tbClient[i]);
        $("#tblList tbody").append("<tr>");
        $("#tblList tbody").append("<td><button alt='"+i+"'class='btnEditor'>Update</button><button alt='"+i+"' class='btnExclude'>Delete!</button></td>");
        $("#tblList tbody").append("<td>"+cli.Productcode+"</td>");
        $("#tblList tbody").append("<td>"+cli.ProductName+"</td>");
        $("#tblList tbody").append("<td>"+cli.ProductSKEW+"</td>");
        $("#tblList tbody").append("<td>"+cli.Quantity+"</td>");
        $("#tblList tbody").append("</tr>");
    }
}


</script>

</body>
</html>